AC_INIT(configure.in)

AM_CONFIG_HEADER(config.h)
AM_INIT_AUTOMAKE(ofs, 0.1)

AC_LANG_CPLUSPLUS
AC_PROG_CXX
AM_PROG_LIBTOOL
OFS_SBIN=/sbin


default_moduledir=/lib/modules/`uname -r`/build/include
AC_ARG_WITH(kernel_includes,
[  --with-moduledir=DIR    kernel modules in DIR (/lib/modules/`uname -r`/build/include)],
kernel_includes=${withval},
kernel_includes=${default_moduledir})

default_asmdir=/lib/modules/`uname -r`/build/arch/x86/include
AC_ARG_WITH(asm_includes,
[  --with-moduledir=DIR    kernel modules in DIR (/lib/modules/`uname -r`/build/arch/x86/include)],
asm_includes=${withval},
asm_includes=${default_asmdir})

AC_SUBST(OFS_SBIN)
AC_SUBST(kernel_includes)
AC_SUBST(asm_includes)

AC_OUTPUT(Makefile libraries/Makefile libraries/libofs/Makefile \
	libraries/libofsconf/Makefile libraries/libofshash/Makefile mounthelper/Makefile ofs-gui/Makefile \
	src/Makefile)
